
# 


    jar包带的
    jvm监控分析工具一般分为两类，一种是jdk自带的工具，一种是第三方的分析工具。
    jdk自带工具一般在jdk bin目录下面，以exe的形式直接点击就可以使用，其中包含分析工具已经很强大，几乎涉及了方方面面，
    但是我们最常使用的只有两款：jconsole.exe和jvisualvm.exe；
    第三方的分析工具有很多，各自的侧重点不同，比较有代表性的：MAT(Memory Analyzer Tool)、GChisto等。

# Jps

作用

    显示JVM进程列表
    包括本地虚拟机ID和主类名

参数

    -l 
        输出完整的main class或者jar
    -v
        输出传递给JVM的参数
        
示例
    
    jps -l

    28729 sun.tools.jps.Jps
    23789 com.asiainfo.aimc.bossbi.BossMain
    23651 com.caucho.server.resin.Resin                     
    
# jinfo

作用
    
    输出并修改运行时的java进程的参数
   
参数

    -sysprops
        查看系统参数
    -flags               
        打印JVM参数
    <no option>          
        表示不带任何选项,将打印出以上所提到的所有属性
    -flag <name>=<value> 
        设置指定参数的值

            
# jmap

作用

    打印JVM堆内对象情况
    
参数

    -heap
        打印heap的概要信息，
        如垃圾收集器组合、分带情况等
    -dump
        -dump:[live,]format=b,file=< filename>
        使用hprof二进制形式,输出jvm的heap内容到文件=. live子选项是可选的，假如指定live选项,那么只输出活的对象到文件。        


# jstack

作用

     打印堆栈信息
     称为threaddump或者javacore文件
     
     



# jstat

作用

    JVM监控统计信息（定时）

参数
    
    -class
    -gc
    -gccapacity

示例

    jstat -gc10028 250 20
    每隔250毫秒，共执行20次
   
   S0U	输出Survivor0已用空间的大小。单位KB。	-gc
   -gcnew
   S1U	输出Survivor1已用空间的大小。单位KB。
    S0: Survivor0(新生代Survivor)是空的
    S1: Survivor1(新生代Survivor)是空的
    E: Eden(新生代Eden)占用0.38%
    O: Old(老年代)占用48.24%
    M:
    CCS:
    YGC: Young GC==> Minor GC ==> 新生代GC的次数
    YGCT: YGC 耗时0.578秒
    FGC: Full GC==>老年代GC的次数
    FGCT: FGC总耗时1.067秒
    GCT: 所有GC总耗时1.645秒

   
# jconsole

作用

    图表化的形式显示各种数据。可通过远程连接监视远程的服务器VM。
    
使用方式

    jdk/bin目录下点击jconsole.exe即可启动

    
# jvisualvm

概述

    VisualVM 是
    jdk自带的最强大的调优工具
    可以使用插件拓展功能
    基于图形化界面的
    出现于JDK1.6
    
安装
    
    使用
        在jdk/bin目录下面双击jvisualvm.exe
        
    插件
        1、从主菜单中选择“工具”>“插件”。
        2、在“可用插件”标签中，选中该插件的“安装”复选框。单击“安装”。
        3、逐步完成插件安装程序。
    推荐插件
        Visual GC
        
        
# Visual GC

Graphs

    compile

    (1)编译时间有点长，用了3.794秒，这个时间主要是用来校验eclipse平台本身的字节码了，所以我们需要关闭字节码校验，让启动时候不会去校验平台本身（也是java写的）的字节码，为了达到这个目的，我们只需要在eclipse启动参数中加上-Xverify:none
    
    如下所示，因为我们用的是Spring Source Tool Suite,所以我们在STS.ini中增加这一行。
    
    类加载时间    
            
    
# MAT
  
    
    MAT(Memory Analyzer Tool)，一个基于Eclipse的内存分析工具，是一个快速、功能丰富的Java heap分析工具，它可以帮助我们查找内存泄漏和减少内存消耗。使用内存分析工具从众多的对象中进行分析，快速的计算出在内存中对象的占用大小，看看是谁阻止了垃圾收集器的回收工作，并可以通过报表直观的查看到可能造成这种结果的对象。
    
    通常内存泄露分析被认为是一件很有难度的工作，一般由团队中的资深人士进行。不过要介绍的 MAT（Eclipse Memory Analyzer）被认为是一个“傻瓜式“的堆转储文件分析工具，你只需要轻轻点击一下鼠标就可以生成一个专业的分析报告。和其他内存泄露分析工具相比，MAT 的使用非常容易，基本可以实现一键到位，即使是新手也能够很快上手使用。
    
    MAT以eclipse 插件的形式来安装，具体的安装过程就不在描述了，可以利用visualvm或者是 jmap命令生产堆文件，











# 参考

    https://www.cnblogs.com/ityouknow/p/6437037.html





















    