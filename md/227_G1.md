    
# G1 

概念

    G1，Garbage First，
    在JDK 1.7版本正式启用，是当时最前沿的垃圾收集器。
    G1可以说是CMS的终极改进版，解决了CMS内存碎片、更多的内存空间登问题。
    虽然流程与CMS比较相似，但底层的原理已是完全不同

作用

    独自完成新生代和老年代的搜集    
    
    最前沿成果。削弱新生代与老年代概念，将整个堆划分为独立的不同Region。根据各Region的回收价值，确定优先列表。
    
    从整体来看：“标记-整理” 算法
    
    从局部（两个Region之间）来看：“复制”算法 
    
    
    堆内存结构的不同。
    
        以前的收集器分代是划分新生代、老年代、持久代等。
        G1则是把内存分为多个大小相同的区域Region，每个Region拥有各自的分代属性，但这些分代不需要连续。
        
        这样的分区可以有效避免内存碎片化问题。
        
    但是这样同样会引申一个新的问题，就是分代的内存不连续，导致在GC搜索垃圾对象的时候需要全盘扫描找出引用内存所在。
    为了解决这个问题，G1对于每个Region都维护一个Remembered Set，用于记录对象引用的情况。当GC发生的时候根据Remembered Set的引用情况去搜索。


GC模式：

    Young GC，关注于所有年轻代的Region，通过控制收集年轻代的Region个数，从而控制GC的回收时间。
    Mixed GC，关注于所有年轻代的Region，并且加上通过预测计算最大收益的若干个老年代Region。
    
        
流程

    整体的执行流程：
    
    初始标记（initial mark），标记了从GC Root开始直接关联可达的对象。STW（Stop the World）执行。
    并发标记（concurrent marking），并发标记初始标记的对象，此时用户线程依然可以执行。
    最终标记（Remark），STW，标记再并发标记过程中产生的垃圾。
    筛选回收（Live Data Counting And Evacuation），评估标记垃圾，根据GC模式回收垃圾。STW执行。
    
    
    
参考

    http://blog.jobbole.com/109170/    
