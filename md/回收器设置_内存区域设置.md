
# 堆大小设置
    
## 参数

初始堆大小由-Xms指定,默认是物理内存的1/64;  
最大堆大小由-Xmx指定,默认是物理内存的1/4.  

## 变化

空余堆内存小于40%时,JVM就会增大堆直到-Xmx的最大限制;  
空余堆内存大于70%时, JVM会减少堆直到-Xms的最小限制.  

## 设置

一般设置-Xms,-Xmx相等以避免在每次GC 后调整堆的大小.  
在32位系统下,一般限制在1.5G~2G;64为操作系统对内存无特定限制.   


# 分代设置

整个堆大小=年轻代大小 + 年老代大小 + 持久代大小.  


# 永久代设置
    
1.参数 -XX:MaxPermSize=16m  
2.持久代一般固定大小为64m
（jdk8没有，设置也不起效）    
 
 
# 年轻代

## 年轻代大小


设置年轻代大小有多种方式
1.-XX:NewSize=n:（设置年轻代大小） 
2.-Xmn：（设置年轻代大小）
3.–XX:NewRatio :  
设置年轻代（包括Eden和两个Survivor区）与年老代的比值（除去持久代）。  
设置为4，则年轻代与年老代所占比值为1：4，年轻代占整个堆栈的1/5

## Surviver大小 

-XX:SurvivorRatio=n:年轻代中Eden区与两个Survivor区的比值。  
注意Survivor区有两个。
如：3，表示 Eden：Survivor=3：2，一个Survivor区占整个年轻代的1/5

## 年龄阈值  
    
控制对象在经过多少次minor GC之后进入老年代      
参数 -XX:MaxTenuringThreshold   
默认值为15   

   
# 栈
 
## 参数
1.线程的堆栈大小由-Xss设置
2.JDK5.0以后每个线程堆栈大小为1M，以前每个线程堆栈大小为256K。

## 线程数


1.在相同物理内存下，减小Xss能生成更多的线程。  
但是操作系统对一个进程内的线程数还是有限制的，不能无限生成，经验值在3000~5000左右。




