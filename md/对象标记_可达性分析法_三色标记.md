# 三色标记法

颜色方案

	把 GC 中的对象划分成三种情况：
	白色：还没有搜索过的对象（白色对象会被当成垃圾对象）
	灰色：正在搜索的对象（从这里开始扫描）
	黑色：搜索完成的对象（不会当成垃圾对象，不会被GC）


# 并发问题


	并发阶段，用户线程和GC线程同时对对象进行修改，
	用户可能出现以下操作
## 漏标	

	漏标就是漏分析白色对象	

原因

	把黑色对象的引用赋值了白色对象（导致该条分析路径中断）
	
![](https://github.com/RodJohn/jvm/blob/master/img/%E4%B8%89%E8%89%B2%E6%A0%87%E8%AE%B0%E6%B3%951.png)	

影响

	回收了存活对象
		
	
# 写入屏障
 
 
    黑色对象新引用白色对象
    可以把白色对象标为灰色（原始算法）
    也可以把黑色对象涂成灰色 (Steele的算法)
    
![](https://github.com/RodJohn/jvm/blob/master/img/%E4%B8%89%E8%89%B2%E6%A0%87%E8%AE%B0%E6%B3%952.png)    
    
