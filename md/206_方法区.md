
# 方法区

## 概述

    方法区（Method Area）
    也叫做 非堆（Non-Heap memory）、堆外内存

## 作用

    存储类的元数据（类名称、方法信息、字段信息）
    在方法区中有一个非常重要的部分就是运行时常量池

## 特点

    进程级别 
    写操作少
    
## 内存

    不需要连续的内存，
    可以动态扩展，动态扩展失败会抛出 OutOfMemoryError 异常；

# 实现

## 过程

    HotSpot使用永久代或者元空间实现方法区

jdk1.7之前

    使用永久代来实现了方法区。

jdk1.7

    已经将方法区中的运行时常量池从永久代移除，
    在Java 堆中开辟了一块区域存放运行时常量池。

jdk1.8

    已经彻底没有了永久代，
    用元空间实现方法区
    将方法区直接放在一个与堆不相连的元空间，

## 区别

永久代

    把方法区当成分代收集中永久代来处理
    
    从而JVM的垃圾收集器可以像管理堆区一样管理这部分区域，
    这个区域的内存回收目标主要是针对常量池的回收和对类型的卸载。

元空间

    元空间是直接内存的一部分，
    
    拥有直接内存的特点



