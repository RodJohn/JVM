# 设定垃圾收集器

默认情况
    
    jdk1.6
        
    jdk1.7/1.8
        client
            serial + serial old    
        server
            Parallel Scavenge+Parallel Old
    jdk1.9 
        G1

    查询语句
        -XX:+PrintCommandLineFlagsjvm

自定义

    设置

        

    查询
        
        jmap -heap     

JVM运行模式

    https://blog.csdn.net/Erica_1230/article/details/69934787



# Minor GC ，Full GC

Minor GC

     新生代GC（Minor GC）：Minor GC指发生在新生代的GC，
     因为新生代的Java对象大多都是朝生夕死，所以Minor GC非常频繁，一般回收速度也比较快。
     当Eden空间不足以为对象分配内存时，会触发Minor GC。    

Full GC 


    老年代GC（Full GC/Major GC）：
    Full GC指发生在老年代的GC，出现了Full GC一般会伴随着至少一次的Minor GC（老年代的对象大部分是Minor GC过程中从新生代进入老年代），
    比如：分配担保失败。Full GC的速度一般会比Minor GC慢10倍以上。
    Full GC触发条件：
    （1）调用System.gc时，系统建议执行Full GC，但是不必然执行
    （2）老年代空间不足
    （3）方法去空间不足
    （4）通过Minor GC后进入老年代的平均大小大于老年代的可用内存
    （5）由Eden区、From Space区向To Space区复制时，对象大小大于To Space可用内存，则把该对象转存到老年代，且老年代的可用内存小于该对象大小
   


    
    
# 参数

    UseSerialGC : 是否使用Serial收集器 
    启用后将使用Serial + Serial Old的组合来进行垃圾回收
    这也是Client模式下的默认值
    UseParNewGC : 是否使用ParNew收集器 
    将使用ParNew + Serial Old的组合来进行垃圾回收
    UseConcMarkSweepGC 
    启用后将使用ParNew + CMS + Serial Old的组合来进行垃圾回收
    Serial Old 作为CMS的后备收集器(Concurrent Mode Failure)
    UseParallelGC 
    使用Parallel Scavenge + Serial Old的组合来进行垃圾回收
    这也是Server模式下的默认值
    UseParallelOldGC 
    使用 Parallel Scavenge + Parallel Old的组合来进行垃圾回收
    SurvivorRatio 
    新生代中Eden和Survivor的比值
    默认为8,即:Eden:Survivor=8:1
    PretenureSizeThreshold 
    这个大小值，表示对象大小大于多少之后直接分配到老年代而不进入新生代
    MaxTenuringThreshold 
    这个年龄值表示对象在经过多少次Minor GC之后就进入老年代
    每次Minor GC之后，对象的该属性值就加1
    UseAdaptiveSizePolicy 
    动态调节堆中各个区域的大小和进入老年代的年龄
    HandlePromotionFailure 
    是否允许分配担保失败
    担保失败指的是: 老年代的剩余空间大小无法容纳新生代中的Eden和Survivor的情况
    ParallelGCThreads 
    并行GC的线程数
    GCTimeRatio 
    GC时间占总时间的比例
    只有在使用Parallel Scavenge的情况下生效
    默认值：99
    MaxGCPauseMillis 
    GC的最大停顿时间
    只有在使用Parallel Scavenge的情况下生效
    CMSInitiatingOccupancyFraction 
    CMS收集器在老年代空间被占用多少后触发GC
    只对CMS收集器生效
    默认值：68%
    UseCMSCompactAtFullCollection 
    CMS收集器在完成垃圾回收后是否进行内存碎片整理
    只对CMS收集器生效
    CMSFullGCsBeforeCompaction 
    CMS经过多少次GC后再进行碎片整理
    也就是设置CMS收集器在进行N次垃圾收集后再进行一次碎片整理
    只对CMS收集器生效
